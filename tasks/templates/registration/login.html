{% load static %}
<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Connexion - My Watch List</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <style>
      body {
        background-color: #3a86ff;
      }
      .center-column {
        width: 600px;
        margin: 20px auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 3px;
        box-shadow: 6px 2px 30px 0px rgba(0, 0, 0, 0.75);
      }
      h1 {
        text-align: center;
        color: #fb5607;
        font-size: 125px;
        text-shadow: -10px 0 black, 0 10px black, 10px 0 black, 0 -10px black;
        margin-bottom: 20px;
      }
      .btn-primary {
        background-color: #0056b3;
        border-color: #004085;
      }
      .btn-primary:hover {
        background-color: #004085;
        border-color: #004085;
      }
      .links {
        margin-top: 10px;
        text-align: center;
        font-size: 14px;
      }
      .links a {
        color: #0056b3;
      }
      .errorlist {
        color: #dc3545;
        font-size: 13px;
        list-style: none;
        padding: 0;
        margin: 5px 0;
      }
      .form-group {
        margin-bottom: 15px;
      }
      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
        color: #333;
      }
      .form-control {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 3px;
        box-sizing: border-box;
      }
      .form-control:focus {
        outline: none;
        border-color: #0056b3;
      }
      .fc-sep {
        margin: 1.5rem 0;
        text-align: center;
        color: #666;
        font-size: 14px;
      }
      /* Bouton officiel France Connect */
      .btn-franceconnect {
        display: inline-block;
        width: 209px;
        height: 56px;
        position: relative;
        text-decoration: none;
      }
      .btn-franceconnect img {
        position: absolute;
        left: 0;
        top: 0;
        width: 209px;
        height: 56px;
        display: block;
        transition: opacity 0.15s ease;
      }
      .btn-franceconnect .fc-btn-hover {
        opacity: 0;
      }
      .btn-franceconnect:hover .fc-btn-default {
        opacity: 0;
      }
      .btn-franceconnect:hover .fc-btn-hover {
        opacity: 1;
      }
      .fc-block {
        text-align: center;
        margin-top: 1rem;
      }
      .fc-block p {
        font-size: 12px;
        color: #666;
        margin-top: 12px;
      }
      .fc-block a {
        color: #000091;
      }
      .btn-google {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        background: #fff;
        color: #3c4043;
        border: 1px solid #dadce0;
        border-radius: 4px;
        padding: 10px 20px;
        font-size: 14px;
        text-decoration: none;
        font-weight: 500;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      }
      .btn-google:hover {
        background: #f8f9fa;
        color: #3c4043;
        text-decoration: none;
        border-color: #dadce0;
      }
    </style>
  </head>
  <body>
    <h1>MY WATCH LIST</h1>
    <div class="center-column">
      <h2 style="font-size: 20px; text-align: center; margin-bottom: 15px">
        Se connecter
      </h2>

      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }}" role="alert">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}

      {% if form.errors %}
      <div class="alert alert-danger" role="alert">
        Identifiants invalides, merci de réessayer.
      </div>
      {% endif %}

      <p class="fc-block">
        <a href="{% url 'france_connect_authorize' %}" class="btn-franceconnect" title="S'identifier avec France Connect">
          <img class="fc-btn-default" src="{% static 'tasks/img/franceconnect-btn-principal.svg' %}" alt="S'identifier avec FranceConnect" width="209" height="56">
          <img class="fc-btn-hover" src="{% static 'tasks/img/franceconnect-btn-principal-hover.svg' %}" alt="" width="209" height="56" aria-hidden="true">
        </a>
      </p>
      <p class="fc-block p small">
        FranceConnect est la solution proposée par l'État pour sécuriser et simplifier la connexion à vos services en ligne.
      </p>
      <p class="fc-block">
        <a href="https://franceconnect.gouv.fr/" target="_blank" rel="noopener" title="Qu'est-ce que FranceConnect ?">Qu'est-ce que FranceConnect ?</a>
      </p>

      <p class="fc-block">
        <a href="{% url 'google_authorize' %}" class="btn-google" title="Se connecter avec Google">
          <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg"><path fill="#4285F4" d="M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 0 0 2.38-5.88c0-.57-.05-.66-.15-1.18z"/><path fill="#34A853" d="M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 0 1-7.4-2.54H1.83v2.07A8 8 0 0 0 8.98 17z"/><path fill="#FBBC05" d="M4.5 10.52a4.8 4.8 0 0 1 0-3.04V5.41H1.83a8 8 0 0 0 0 7.18l2.67-2.07z"/><path fill="#EA4335" d="M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 0 0 1.83 5.4L4.5 7.49a4.77 4.77 0 0 1 4.48-3.3z"/></svg>
          Se connecter avec Google
        </a>
      </p>

      <div class="fc-sep">— ou avec votre compte —</div>

      <form method="post" action="{% url 'login' %}">
        {% csrf_token %}
        {% if request.GET.next %}
          <input type="hidden" name="next" value="{{ request.GET.next }}">
        {% endif %}
        <div class="form-group">
          <label for="{{ form.username.id_for_label }}">Nom d'utilisateur</label>
          <input type="text" name="{{ form.username.name }}" id="{{ form.username.id_for_label }}" class="form-control" required autofocus>
          {% if form.username.errors %}
            <ul class="errorlist">{{ form.username.errors }}</ul>
          {% endif %}
        </div>
        <div class="form-group">
          <label for="{{ form.password.id_for_label }}">Mot de passe</label>
          <input type="password" name="{{ form.password.name }}" id="{{ form.password.id_for_label }}" class="form-control" required>
          {% if form.password.errors %}
            <ul class="errorlist">{{ form.password.errors }}</ul>
          {% endif %}
        </div>
        <button type="submit" class="btn btn-primary mt-2 btn-block">Se connecter</button>
      </form>

      <p class="mt-3 text-center">Pas encore de compte ? <a href="{% url 'signup' %}">Créer un compte</a></p>
    </div>
  </body>
</html>
